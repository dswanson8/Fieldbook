:root{--bg:#ffffff;--card:#f9fafb;--muted:#4b5563;--text:#111827;--accent:#2563eb;--accent-2:#16a34a;--warn:#d97706;--bad:#dc2626;--calc:#f3f4f6;--calc-border:#e5e7eb;--border:black}*{box-sizing:border-box}html,body{height:100%}body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;-webkit-tap-highlight-color:#fff0;padding:5px}.wrap{max-width:900px;margin:0 auto}header{position:sticky;top:0;z-index:30;background:rgb(255 255 255 / .96);backdrop-filter:saturate(180%) blur(6px)}.head{display:grid;grid-template-columns:1fr;gap:8px;padding:8px 0}.meta{display:grid;grid-template-columns:1fr;gap:8px}.meta input{width:100%}.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:10px}.text-small{font-size:13px}.delta-up{color:#059669;font-weight:700}.delta-down{color:#dc2626;font-weight:700}.delta-zero{color:#6b7280;font-weight:600}.toolbar .seg{grid-column:span 2}.toolbar .wide{grid-column:span 2}@media (min-width:560px){.toolbar{grid-template-columns:repeat(4,1fr)}}.addBtn{display:flex;gap:10px}button,.seg label{appearance:none;border:1px solid var(--border);background:#fff;color:var(--text);padding:12px;border-radius:10px;font-weight:700;font-size:16px;letter-spacing:.2px;cursor:pointer;user-select:none;display:block;width:100%;margin:10px 0;border:2px solid #000}button.primary{background:var(--accent);border-color:var(--accent);color:#fff}button.ghost{background:#fff}.seg{display:flex;overflow:hidden;gap:10px}.seg input{display:none}.seg label{padding:10px 12px;background:#fff;text-align:center;margin:0}.seg input:checked+label{background:#9cc7ff;color:#1d4ed8}.chips{display:grid;gap:8px;grid-template-columns:repeat(auto-fit,minmax(0,1fr))}.chip{text-align:center;padding:8px 0;border:1px solid var(--border);border-radius:8px;font-size:14px;font-weight:600;color:var(--muted);background:#fff}#scSetsBar{display:flex;flex-wrap:wrap;gap:4px;margin-bottom:4px}#scSetsBar .chip{margin:0;width:19%;padding-left:4px;padding-right:4px;font-size:10px}#addExistingBsBtn{margin:0;background-color:skyblue}#bsPickerClose{display:block;width:auto}.bs-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}@media (max-width:420px){.bs-grid{grid-template-columns:repeat(2,1fr)}}.bs-btn{padding:10px;border:1px solid var(--border);border-radius:10px;background:#fff;font-weight:700;text-align:left}.bs-btn .bs-meta{display:block;color:#6b7280;font-weight:400;font-size:12px;margin-top:4px}.chip button{width:min-content}table{width:100%;border-collapse:separate;border-spacing:0;margin-top:8px;table-layout:fixed}colgroup col.sta{width:22%}colgroup col.small{width:15.6%}thead th{position:sticky;top:92px;z-index:20;background:#fff;color:var(--muted);font-weight:700;text-align:left;border-bottom:1px solid var(--border);padding:8px;font-size:13px}tbody td{border-bottom:1px solid var(--border);font-size:16px;vertical-align:middle}.cell-edit{background:#fff;border:1px solid var(--border);min-height:44px}.cell-edit:focus-within{outline:0;border-color:#60a5fa;box-shadow:0 0 0 3px rgb(59 130 246 / .25)}.cell-calc{color:#111827;border:1px solid var(--calc-border);text-align:center}.cell-input{width:100%;background:#fff0;border:0;color:var(--text);font:600 18px Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;outline:none;padding:10px 2px;font-size:14px;text-align:center}.cell-input--manual{border:1px solid #000;display:block;width:80%;margin:5px auto;padding:2px;border-radius:0}.cell-input::placeholder{color:#9ca3af}.pipe-thick{position:relative}.pipe-thick label{position:absolute;font-size:12px;font-weight:700;top:-20px}.qa-green{background:rgb(22 163 74 / .1)!important;color:#166534!important}.qa-yellow{background:rgb(234 179 8 / .15)!important;color:#92400e!important}.qa-red{background:rgb(220 38 38 / .12)!important;color:#991b1b!important}.footerbar{position:sticky;bottom:0;z-index:20;margin-top:10px}.footerbar .card{display:block}input,select{background:#fff;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:12px;width:100%;text-transform:uppercase}input::placeholder{color:#9ca3af}#summary{font-size:12px}#summary b{color:#111;font-weight:700}.hi-active{background:#dcfce7;color:#166534;padding:2px 6px;border-radius:6px;font-weight:700}.hidden{display:none}.sheet.hidden{display:none}.sheet{position:fixed;inset:0;z-index:60}.sheet-backdrop{position:absolute;inset:0;background:rgb(0 0 0 / .25)}.sheet-panel{position:absolute;left:0;right:0;bottom:0;background:#fff;border-top-left-radius:16px;border-top-right-radius:16px;box-shadow:0 -8px 24px rgb(0 0 0 / .2);padding:12px;min-height:75vh;max-height:90vh;overflow:auto}.sheet-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;font-weight:700}.tool-card{border:1px solid var(--border);border-radius:12px;padding:10px;background:#fff}.tool-title{font-weight:700;margin-bottom:8px}.tool-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}@media (min-width:560px){.tool-grid{grid-template-columns:repeat(3,1fr)}}#toolsClose,#gradeSpotsClose,#asbPickerClose{display:block;width:auto;margin-left:auto;margin-top:0;margin-bottom:0}.tool-results{margin-top:8px;padding:8px;border:1px solid var(--border);border-radius:8px;background:#f9fafb;color:#111;min-height:40px}.tool-actions{display:flex;gap:8px;margin-top:8px}.mini-hint{font-size:12px;text-align:center}.mini-hint b{font-size:16px;background-color:#ff0}.delta-badge{display:inline-block;font-size:13px;border-radius:2px;font-weight:700;line-height:1.2}.delta-badge.green{background:rgb(22 163 74 / .10);color:#166534}.delta-badge.red{background:rgb(220 38 38 / .12);color:#991b1b}.delta-badge.neutral{background:#eef2f7;color:#374151;font-weight:600}